<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Diff Viewer</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <header>
    <h1>GitHub Diff Viewer</h1>
    <div id="auth-status">
      <span id="user-info"></span>
      <a id="login-btn" href="https://gh-dir-diff-oauth.mullein-rapids-4s.workers.dev/login">Login with GitHub</a>
      <button id="logout-btn" style="display:none" onclick="logout()">Logout</button>
    </div>
  </header>

  <main>
    <form id="diff-form" onsubmit="loadDiff(event)">
      <div class="form-group">
        <label for="repo">Repository (owner/repo)</label>
        <input type="text" id="repo" placeholder="facebook/react" required>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="base">Base (branch/tag/commit)</label>
          <input type="text" id="base" placeholder="main" required>
        </div>
        <div class="form-group">
          <label for="head">Head (branch/tag/commit)</label>
          <input type="text" id="head" placeholder="feature-branch" required>
        </div>
      </div>

      <div class="form-group">
        <label for="path-filter">Path filter (glob pattern, optional)</label>
        <input type="text" id="path-filter" placeholder="src/**/*.ts">
        <small>Examples: src/**, *.md, packages/core/**</small>
      </div>

      <button type="submit">Compare</button>
    </form>

    <div id="loading" style="display:none">Loading...</div>
    <div id="error"></div>
    <div id="diff-stats"></div>
    <div id="diff-container"></div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css">
  <script src="/app.js"></script>
</body>
</html>
